---
import videos from '../data/videos';
import Layout from '../layouts/Layout.astro';

// Helper function to format date
function formatDate(fechaISO: string): string {
  const opciones: Intl.DateTimeFormatOptions = { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' };
  return new Date(fechaISO).toLocaleDateString('es-ES', opciones);
}
---

<Layout>
  <h1 class="mb-6 text-4xl font-extrabold text-gray-800">Video Player</h1>

  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
    {videos.map((video) => (
      <a
        href={`/videos/${video.id}`}
        class="group block rounded-2xl bg-neutral-50 shadow-md overflow-hidden hover:shadow-xl transition focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500"
        aria-label={`Ver detalles del video: ${video.titulo}`}
      >
        <!-- Imagen con overlay -->
        <div class="relative">
          <img
            src={video.imagen}
            alt={video.titulo}
            class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-[1.02]"
            loading="lazy"
            decoding="async"
          />
          <!-- Footer sobre la imagen -->
          <div class="absolute inset-x-0 bottom-0 flex items-center justify-between px-3 py-2 bg-gradient-to-t from-black/70 to-transparent text-white text-sm">
            <span class="font-medium bg-blue-800 text-amber-50 px-2 rounded-lg">
              {video.canal}
            </span>
            <span class="bg-black/70 px-2 py-0.5 rounded-md text-xs font-semibold">
              {video.duracion}
            </span>
          </div>
        </div>

        <!-- Contenido -->
        <div class="p-4 flex flex-col gap-2">
          <!-- TÃ­tulo -->
          <h2 class="text-lg font-semibold text-gray-900 line-clamp-2">
            {video.titulo}
          </h2>

          <!-- Fecha -->
          <p class="text-sm text-gray-500">{formatDate(video.fecha)}</p>
        </div>
      </a>
    ))}
  </div>
</Layout>
